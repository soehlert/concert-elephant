{% extends "base.html" %}

{% block content %}
<div class="row justify-content-center">
    <div class="col col-md-8 col-sm-12">
        <!-- Artists Results -->
        {% if artists %}
        <div class="card mt-3">
            <h5 class="card-header card-header-custom display-4 text-center">Artists</h5>
            <table class="table table-striped table-hover">
                <thead class="table-custom">
                    <tr>
                        <th class="text-center" scope="col">Artist</th>
                        <th class="text-center" scope="col">Total Concerts</th>
                    </tr>
                </thead>
                <tbody>
                    {% for artist in artists %}
                    <tr class="clickable-row" data-href="{% url 'concerts:artist-detail' artist.pk %}">
                        <td class="text-center">{{ artist.name }}</td>
                        <td class="text-center">{{ artist.concerts.count }}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
        {% endif %}

        <!-- Venues Results -->
        {% if venues %}
        <div class="card mt-3">
            <h5 class="card-header card-header-custom display-4 text-center">Venues</h5>
            <table class="table table-striped table-hover">
                <thead class="table-custom">
                    <tr>
                        <th scope="col">Venue</th>
                        <th class="text-center" scope="col">City</th>
                        <th class="text-center" scope="col">Country</th>
                        <th class="text-center" scope="col">Total Concerts</th>
                    </tr>
                </thead>
                <tbody>
                    {% for venue in venues %}
                    <tr class="clickable-row" data-href="{% url 'concerts:venue-detail' venue.pk %}">
                        <td>{{ venue.name }}</td>
                        <td class="text-center">{{ venue.city }}</td>
                        <td class="text-center">{{ venue.country }}</td>
                        <td class="text-center">{{ venue.concerts.count }}</td>  <!-- Assuming you have a reverse relation called concerts on the Venue model -->
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
        {% endif %}

        <!-- Concerts Results -->
        {% if concerts %}
        <div class="card mt-3">
            <h5 class="card-header card-header-custom display-4 text-center">Concerts</h5>
            <table class="table table-striped table-hover">
                <thead class="table-custom">
                    <tr>
                        <th scope="col">Artist</th>
                        <th class="text-center" scope="col">Venue</th>
                        <th class="text-center" scope="col">Date</th>
                        <th class="text-center" scope="col">Opener</th>
                    </tr>
                </thead>
                <tbody>
                    {% for concert in concerts %}
                    <tr class="clickable-row" data-href="{% url 'concerts:concert-detail' concert.pk %}">
                        <td>{{ concert.artist }}</td>
                        <td class="text-center">{{ concert.venue }}</td>
                        <td class="text-center">{{ concert.date }}</td>
                        <td class="text-center">
                        {% for opener in concert.opener.all %}
                          {{ opener.name }}
                          {% if not forloop.last %},{% endif %}
                        {% endfor %}
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
        {% endif %}

    </div>
</div>
{% endblock %}
