{% load crispy_forms_filters %}
{% load crispy_forms_tags %}

{% block form %}
  <form id="concert-form"
        method="POST"
        action="{% url 'concerts:concert-create' %}">
    {% csrf_token %}
    <!-- Render all fields except the artist field -->
    <div class="form-group mb-2">
      <div>
        <label for="artist-autocomplete">Artist*</label>
        <i class="bi bi-plus-circle" id="createArtistButton"></i>
      </div>
      <input type="text"
             id="artist-autocomplete"
             class="form-control"
             placeholder="Start typing artist name..." />
      <!-- This hidden input will hold the actual selected artist ID for submission -->
      <input type="hidden" name="artist" id="concert-artist" />
    </div>
    <div class="form-group mb-2">
      <div>
        <label for="venue-autocomplete">Venue*</label>
        <i class="bi bi-plus-circle" id="createVenueButton"></i>
      </div>
      <input type="text"
             id="venue-autocomplete"
             placeholder="Start typing a venue..."
             class="form-control" />
      <input type="hidden" name="venue" id="concert-venue" />
    </div>
    <!-- Render all fields except the artist field with crispy forms -->
    {{ form.non_field_errors|as_crispy_errors }}
    {% for field in form %}
      {% if field.name != "artist" and field.name != "venue" %}
        <div class="form-group">{{ field|as_crispy_field }}</div>
      {% endif %}
    {% endfor %}
    <div class="text-center">
      <button class="btn btn-outline-info text-white" type="submit">Add Concert</button>
    </div>
  </form>
{% endblock form %}
